<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports"
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports 
              http://jasperreports.sourceforge.net/xsd/jasperreport.xsd"
              name="banking_transactions" pageWidth="595" pageHeight="842" 
              columnWidth="555" leftMargin="20" rightMargin="20" 
              topMargin="20" bottomMargin="20">
    
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    
    <!-- Parameters -->
    <parameter name="accountNumber" class="java.lang.String"/>
    <parameter name="accountHolder" class="java.lang.String"/>
    <parameter name="reportDate" class="java.lang.String"/>
    
    <!-- Fields from data source -->
    <field name="transactionId" class="java.lang.String"/>
    <field name="date" class="java.lang.String"/>
    <field name="description" class="java.lang.String"/>
    <field name="type" class="java.lang.String"/>
    <field name="amount" class="java.lang.Double"/>
    <field name="balance" class="java.lang.Double"/>
    
    <!-- Variables -->
    <variable name="totalDebits" class="java.lang.Double" calculation="Sum">
        <variableExpression><![CDATA[$F{type}.equals("DEBIT") ? $F{amount} : 0.0]]></variableExpression>
    </variable>
    
    <variable name="totalCredits" class="java.lang.Double" calculation="Sum">
        <variableExpression><![CDATA[$F{type}.equals("CREDIT") ? $F{amount} : 0.0]]></variableExpression>
    </variable>
    
    <!-- Title Band -->
    <title>
        <band height="100" splitType="Stretch">
            <staticText>
                <reportElement x="0" y="10" width="555" height="30"/>
                <textElement textAlignment="Center">
                    <font size="20" isBold="true"/>
                </textElement>
                <text><![CDATA[Banking Transaction Report]]></text>
            </staticText>
            <staticText>
                <reportElement x="0" y="50" width="100" height="20"/>
                <textElement>
                    <font size="10" isBold="true"/>
                </textElement>
                <text><![CDATA[Account Number:]]></text>
            </staticText>
            <textField>
                <reportElement x="100" y="50" width="200" height="20"/>
                <textElement>
                    <font size="10"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{accountNumber}]]></textFieldExpression>
            </textField>
            <staticText>
                <reportElement x="0" y="70" width="100" height="20"/>
                <textElement>
                    <font size="10" isBold="true"/>
                </textElement>
                <text><![CDATA[Account Holder:]]></text>
            </staticText>
            <textField>
                <reportElement x="100" y="70" width="200" height="20"/>
                <textElement>
                    <font size="10"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{accountHolder}]]></textFieldExpression>
            </textField>
            <staticText>
                <reportElement x="355" y="50" width="100" height="20"/>
                <textElement>
                    <font size="10" isBold="true"/>
                </textElement>
                <text><![CDATA[Report Date:]]></text>
            </staticText>
            <textField>
                <reportElement x="455" y="50" width="100" height="20"/>
                <textElement>
                    <font size="10"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{reportDate}]]></textFieldExpression>
            </textField>
        </band>
    </title>
    
    <!-- Column Header Band -->
    <columnHeader>
        <band height="30" splitType="Stretch">
            <staticText>
                <reportElement mode="Opaque" x="0" y="0" width="60" height="30" backcolor="#E0E0E0"/>
                <box>
                    <pen lineWidth="0.5"/>
                </box>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="9" isBold="true"/>
                </textElement>
                <text><![CDATA[Trans ID]]></text>
            </staticText>
            <staticText>
                <reportElement mode="Opaque" x="60" y="0" width="80" height="30" backcolor="#E0E0E0"/>
                <box>
                    <pen lineWidth="0.5"/>
                </box>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="9" isBold="true"/>
                </textElement>
                <text><![CDATA[Date]]></text>
            </staticText>
            <staticText>
                <reportElement mode="Opaque" x="140" y="0" width="200" height="30" backcolor="#E0E0E0"/>
                <box>
                    <pen lineWidth="0.5"/>
                </box>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="9" isBold="true"/>
                </textElement>
                <text><![CDATA[Description]]></text>
            </staticText>
            <staticText>
                <reportElement mode="Opaque" x="340" y="0" width="60" height="30" backcolor="#E0E0E0"/>
                <box>
                    <pen lineWidth="0.5"/>
                </box>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="9" isBold="true"/>
                </textElement>
                <text><![CDATA[Type]]></text>
            </staticText>
            <staticText>
                <reportElement mode="Opaque" x="400" y="0" width="80" height="30" backcolor="#E0E0E0"/>
                <box>
                    <pen lineWidth="0.5"/>
                </box>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="9" isBold="true"/>
                </textElement>
                <text><![CDATA[Amount]]></text>
            </staticText>
            <staticText>
                <reportElement mode="Opaque" x="480" y="0" width="75" height="30" backcolor="#E0E0E0"/>
                <box>
                    <pen lineWidth="0.5"/>
                </box>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="9" isBold="true"/>
                </textElement>
                <text><![CDATA[Balance]]></text>
            </staticText>
        </band>
    </columnHeader>
    
    <!-- Detail Band -->
    <detail>
        <band height="25" splitType="Stretch">
            <textField>
                <reportElement x="0" y="0" width="60" height="25"/>
                <box>
                    <pen lineWidth="0.5"/>
                </box>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{transactionId}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="60" y="0" width="80" height="25"/>
                <box>
                    <pen lineWidth="0.5"/>
                </box>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{date}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="140" y="0" width="200" height="25"/>
                <box leftPadding="5">
                    <pen lineWidth="0.5"/>
                </box>
                <textElement verticalAlignment="Middle">
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{description}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="340" y="0" width="60" height="25"/>
                <box>
                    <pen lineWidth="0.5"/>
                </box>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="8" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{type}]]></textFieldExpression>
            </textField>
            <textField pattern="₹ #,##0.00">
                <reportElement x="400" y="0" width="80" height="25"/>
                <box rightPadding="5">
                    <pen lineWidth="0.5"/>
                </box>
                <textElement textAlignment="Right" verticalAlignment="Middle">
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{amount}]]></textFieldExpression>
            </textField>
            <textField pattern="₹ #,##0.00">
                <reportElement x="480" y="0" width="75" height="25"/>
                <box rightPadding="5">
                    <pen lineWidth="0.5"/>
                </box>
                <textElement textAlignment="Right" verticalAlignment="Middle">
                    <font size="8" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{balance}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
    
    <!-- Summary Band -->
    <summary>
        <band height="80" splitType="Stretch">
            <staticText>
                <reportElement mode="Opaque" x="0" y="10" width="340" height="25" backcolor="#F0F0F0"/>
                <box>
                    <pen lineWidth="0.5"/>
                </box>
                <textElement textAlignment="Right" verticalAlignment="Middle">
                    <font size="10" isBold="true"/>
                </textElement>
                <text><![CDATA[Total Credits:  ]]></text>
            </staticText>
            <textField pattern="₹ #,##0.00">
                <reportElement mode="Opaque" x="340" y="10" width="140" height="25" backcolor="#F0F0F0"/>
                <box rightPadding="5">
                    <pen lineWidth="0.5"/>
                </box>
                <textElement textAlignment="Right" verticalAlignment="Middle">
                    <font size="10" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$V{totalCredits}]]></textFieldExpression>
            </textField>
            <staticText>
                <reportElement mode="Opaque" x="0" y="35" width="340" height="25" backcolor="#F0F0F0"/>
                <box>
                    <pen lineWidth="0.5"/>
                </box>
                <textElement textAlignment="Right" verticalAlignment="Middle">
                    <font size="10" isBold="true"/>
                </textElement>
                <text><![CDATA[Total Debits:  ]]></text>
            </staticText>
            <textField pattern="₹ #,##0.00">
                <reportElement mode="Opaque" x="340" y="35" width="140" height="25" backcolor="#F0F0F0"/>
                <box rightPadding="5">
                    <pen lineWidth="0.5"/>
                </box>
                <textElement textAlignment="Right" verticalAlignment="Middle">
                    <font size="10" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$V{totalDebits}]]></textFieldExpression>
            </textField>
        </band>
    </summary>
    
</jasperReport>
